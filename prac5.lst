


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             datos,DATA
    2 00000000         ;Variables principales del programa
    3 00000000 00000000 
                       reloj   DCD              0           ;contador de centes
                                                            imas de segundo mov
                                                            imiento
    4 00000004 00000000 
                       reloj_fin
                               DCD              0           ;contador de centes
                                                            imas de segundo tie
                                                            mpo sin capturar ni
                                                            ngun simbolo
    5 00000008 00000008 
                       max     DCD              8           ;velocidad de movim
                                                            iento (en centesima
                                                            s s.)
    6 0000000C 00000008 
                       cont    DCD              8           ;instante siguiente
                                                             movimiento
    7 00000010 00000200 
                       cont_simbolo
                               DCD              512         ;instante siguiente
                                                             aparicion simbolo
    8 00000014 00000000 
                       dirx    DCD              0           ;direccion mov. car
                                                            acter â€˜#â€™ (-1 i
                                                            zda.,0 stop,1 der.)
                                                            
    9 00000018 00000000 
                       diry    DCD              0           ;direccion mov. car
                                                            acter â€˜#â€™ (-1 a
                                                            rriba,0 stop,1 abaj
                                                            o)
   10 0000001C 00      fin     DCB              0           ;indicador fin de p
                                                            rograma (si vale 1)
                                                            
   11 0000001D         ;interrupciones IRQ
   12 0000001D FFFFF000 
                       ICBaseEnabl
                               EQU              0xFFFFF000  ;base para activar 
                                                            IRQ
   13 0000001D FFFFF010 
                       VICIntEnable
                               EQU              0xFFFFF010  ;activar IRQs (solo
                                                             bits 1)
   14 0000001D FFFFF014 
                       VICIntEnClr
                               EQU              0xFFFFF014  ;desactivar IRQs (s
                                                            olo bits 1)
   15 0000001D FFFFF100 
                       VICVectAddr0
                               EQU              0xFFFFF100  ;Registro con la @ 
                                                            de la 1Âº instr de 
                                                            la RSI_IRQ0 vectori
                                                            zada
   16 0000001D FFFFF030 
                       VICVectAddr
                               EQU              0xFFFFF030  ;Registro @VI
   17 0000001D 00000010 



ARM Macro Assembler    Page 2 


                       IntEnableOffset
                               EQU              0x10        ;selecciona activar
                                                             IRQ4
   18 0000001D 00000004 
                       IRQ_Index_timer
                               EQU              4           ;NÂº de IRQ del Tim
                                                            er0
   19 0000001D 00000007 
                       IRQ_Index_tec
                               EQU              7           ;NÂº de IRQ del tec
                                                            lado
   20 0000001D E0004000 
                       T0_IR   EQU              0xE0004000  ;reg. para bajar pe
                                                            ticiones IRQ4
   21 0000001D E0010000 
                       TEC_DAT EQU              0xE0010000  ;reg. datos teclado
                                                             UART11
   22 0000001D 00000080 
                       I_Bit   EQU              0x80        ;si I bit = 1 => IR
                                                            Q = 0
   23 0000001D         ;pantalla
   24 0000001D 00000010 
                       alto    EQU              16          ; alto de la pantal
                                                            la
   25 0000001D 00000020 
                       ancho   EQU              32          ; ancho de la panta
                                                            lla
   26 0000001D 00 00 00 
              00000000 fila    DCD              0           ; variable auxiliar
                                                             para detectar la l
                                                            legada al extremo d
                                                            e la pantalla
   27 00000024 00000000 
                       columna DCD              0           ; variable auxiliar
                                                             para detectar la l
                                                            legada al extremo d
                                                            e la pantalla
   28 00000028 40007E00 
                       pantalla
                               EQU              0x40007E00  ; direccion princip
                                                            al de la pantalla
   29 00000028 00000000 
                       dir_posicion
                               DCD              0           ; punto medio de la
                                                             pantalla
   30 0000002C         ;codigos ASCII
   31 0000002C 00000020 
                       espacio EQU              32          ; codigo ASCII -> "
                                                             "
   32 0000002C 00000023 
                       jugador EQU              35          ; codigo ASCII -> "
                                                            #"
   33 0000002C 00000024 
                       simbolo EQU              36          ; codigo ASCII -> "
                                                            $"
   34 0000002C 00000049 
                       arriba  EQU              73          ; codigo ASCII -> "
                                                            I"
   35 0000002C 00000069 



ARM Macro Assembler    Page 3 


                       arriba_min
                               EQU              105         ; codigo ASCII -> "
                                                            i"
   36 0000002C 0000004A 
                       izquierda
                               EQU              74          ; codigo ASCII -> "
                                                            J"
   37 0000002C 0000006A 
                       izquierda_min
                               EQU              106         ; codigo ASCII -> "
                                                            j"
   38 0000002C 0000004B 
                       abajo   EQU              75          ; codigo ASCII -> "
                                                            K"
   39 0000002C 0000006B 
                       abajo_min
                               EQU              107         ; codigo ASCII -> "
                                                            k"
   40 0000002C 0000004C 
                       derecha EQU              76          ; codigo ASCII -> "
                                                            L"
   41 0000002C 0000006C 
                       derecha_min
                               EQU              108         ; codigo ASCII -> "
                                                            l"
   42 0000002C 0000002B 
                       aumentar
                               EQU              43          ; codigo ASCII -> "
                                                            +"
   43 0000002C 0000002D 
                       disminuir
                               EQU              45          ; codigo ASCII -> "
                                                            -"
   44 0000002C 00000051 
                       acabar  EQU              81          ; codigo ASCII -> "
                                                            Q"
   45 0000002C 00000071 
                       acabar_min
                               EQU              113         ; codigo ASCII -> "
                                                            q"
   46 0000002C         ;semilla
   47 0000002C 000001FF 
                       semilla EQU              511         ; valor maximo para
                                                             generar numeros (0
                                                            -511)
   48 0000002C         ;velocidad
   49 0000002C 00000001 
                       velocidad_maxima
                               DCD              1           ; 1 centesima de se
                                                            gundo para el movim
                                                            iento
   50 00000030 0000007C 
                       velocidad_minima
                               DCD              124         ; 124 centesimas de
                                                             segundo para el mo
                                                            vimiento
   51 00000034         
   52 00000034                 AREA             codigo,CODE
   53 00000000                 EXPORT           inicio      ; forma de enlazar 



ARM Macro Assembler    Page 4 


                                                            con el startup.s
   54 00000000                 IMPORT           srand       ; para poder invoca
                                                            r SBR srand
   55 00000000                 IMPORT           rand        ; para poder invoca
                                                            r SBR rand
   56 00000000         ;MAIN
   57 00000000         inicio                               ; se recomienda pon
                                                            er punto de parada 
                                                            (breakpoint) en la 
                                                            primera
   58 00000000         ; instruccion de codigo para poder ejecutar todo el Star
                       tup de golpe
   59 00000000         
   60 00000000         ;Habilitar interrupcion en VIC
   61 00000000         ;RSI_timer
   62 00000000 E59F0644        ldr              r0, =VICVectAddr0
   63 00000004 E59F1644        ldr              r1, =RSI_timer
   64 00000008 E3A02004        ldr              r2, =IRQ_Index_timer
   65 0000000C E7801102        str              r1, [r0, r2, LSL#2]
   66 00000010 E59F063C        ldr              r0, =VICIntEnable
   67 00000014 E5901000        ldr              r1, [r0]
   68 00000018 E3A01010        mov              r1, #1<<IRQ_Index_timer
   69 0000001C E5801000        str              r1, [r0]
   70 00000020         ;RSI_teclado
   71 00000020 E59F0624        ldr              r0, =VICVectAddr0
   72 00000024 E59F162C        ldr              r1, =RSI_teclado
   73 00000028 E3A02007        ldr              r2, =IRQ_Index_tec
   74 0000002C E7801102        str              r1,[r0,r2,LSL #2] ;VI[r2] = @RS
                                                            I_teclado
   75 00000030 E59F061C        ldr              r0, =VICIntEnable 
                                                            ;r0 = @VICIntEnable
                                                            
   76 00000034 E5901000        ldr              r1, [r0]
   77 00000038 E3A01080        mov              r1,#2_10000000 
                                                            ;r1 = #2_10000000
   78 0000003C E5801000        str              r1,[r0]     ;VICIntEnable [7] =
                                                             1(habilit. IRQ7)
   79 00000040         
   80 00000040         ;Iniciar pantalla
   81 00000040 E59F0614 
                       ini_pantalla
                               LDR              r0, =pantalla ; r0=@pantalla
   82 00000044 E3A02020        mov              r2, #ancho
   83 00000048 E3A03020        mov              r3, #espacio
   84 0000004C E3A04023        mov              r4, #jugador
   85 00000050 E0211001        eor              r1,r1,r1    ; i = 0
   86 00000054 E3510020 
                       buc_col cmp              r1, #ancho  ; while( i < column
                                                            as)
   87 00000058 0A000009        beq              fin_col
   88 0000005C E0255005        eor              r5,r5,r5    ; j = 0
   89 00000060 E3550010 
                       buc_fil cmp              r5, #alto   ; while( j < filas)
                                                            
   90 00000064 0A000004        beq              fin_fil
   91 00000068 E0260295        mla              r6, r5, r2, r0 ; r6 = (j*column
                                                            as) + @pantalla
   92 0000006C E0866001        add              r6, r6, r1  ; m[i][j] = r6 + i
   93 00000070 E5C63000        strb             r3,[r6]     ; m[i][j] = espacio



ARM Macro Assembler    Page 5 


                                                            
   94 00000074 E2855001        add              r5,r5,#1    ; j++
   95 00000078 EAFFFFF8        b                buc_fil
   96 0000007C E2811001 
                       fin_fil add              r1,r1,#1    ; i++
   97 00000080 EAFFFFF3        b                buc_col
   98 00000084 E3A0100F 
                       fin_col mov              r1, #15     ; i = 15
   99 00000088 E3A05007        mov              r5, #7      ; j = 7
  100 0000008C E0260295        mla              r6, r5, r2, r0 ; r6 = ( j * col
                                                            umnas ) + @pantalla
                                                            
  101 00000090 E0866001        add              r6, r6, r1  ; m[15][7] = r6 + i
                                                            
  102 00000094 E5C64000 
                       fin_ini_pantalla
                               strb             r4,[r6]     ; m[15][7] = jugado
                                                            r
  103 00000098         
  104 00000098         ;iniciar posicion inicial en el medio de la matriz
  105 00000098 E59F05C0        LDR              r0,=dir_posicion
  106 0000009C E5806000        str              r6, [r0]    ; posicion = r6 = (
                                                            7*columnas) + @pant
                                                            alla + 15 = m[15][7
                                                            ]
  107 000000A0 E59F75BC        LDR              r7, =fila
  108 000000A4 E3A08007        mov              r8 ,#7
  109 000000A8 E5878000        str              r8,[r7]
  110 000000AC E59F75B4        LDR              r7, =columna
  111 000000B0 E3A0800F        mov              r8 ,#15
  112 000000B4 E5878000        str              r8,[r7]
  113 000000B8         
  114 000000B8 E59F05AC        LDR              r0,=semilla
  115 000000BC E52D0004        PUSH             {r0}
  116 000000C0 EBFFFFFE        bl               srand
  117 000000C4 E24DD004        sub              sp,sp,#4
  118 000000C8         
  119 000000C8         ;bucle programa
  120 000000C8 E59F55A0 
                       bucle   LDR              r5, =fin    ; @fin
  121 000000CC E5D56000        ldrb             r6, [r5]    ; r6 = fin
  122 000000D0 E3560001        cmp              r6,#1       ; if(fin==1)
  123 000000D4 0A000037        beq              fin_juego
  124 000000D8         
  125 000000D8         ;bucle tiempo
  126 000000D8 E59F7594 
                       iterar  LDR              r7, =reloj
  127 000000DC E5978000        ldr              r8, [r7]    ; r8 = reloj
  128 000000E0         
  129 000000E0 E59F0590        LDR              r0, =cont
  130 000000E4 E5901000        ldr              r1,[r0]
  131 000000E8 E1580001        cmp              r8, r1      ;if( reloj == cont)
                                                            
  132 000000EC 0A00001D        beq              if_mov
  133 000000F0         
  134 000000F0 E59F2584        LDR              r2, =cont_simbolo
  135 000000F4 E5923000        ldr              r3,[r2]
  136 000000F8 E1580003        cmp              r8, r3      ;if( reloj == cont_
                                                            simbolo)



ARM Macro Assembler    Page 6 


  137 000000FC 0A000009        beq              if_simbolo
  138 00000100 EAFFFFF4        b                iterar
  139 00000104         
  140 00000104 E59F4574        LDR              r4, =reloj_fin
  141 00000108 E5944000        ldr              r4,[r4]
  142 0000010C E59F5570        ldr              r5, =30000
  143 00000110 E1540005        cmp              r4, r5      ; if(tiempo_fin = 3
                                                            0000)
  144 00000114 0A000000        beq              perder
  145 00000118 EAFFFFEE        b                iterar
  146 0000011C         
  147 0000011C E3A06001 
                       perder  mov              r6, #1
  148 00000120 E5C76000        strb             r6,[r7]     ; fin = 1
  149 00000124 EAFFFFE7        b                bucle
  150 00000128         
  151 00000128         if_simbolo                           ;si toca aÃ±adir â€
                                                            ˜$â€™
  152 00000128         ;calcular instante siguiente apariciÃ³n â€˜$â€™
  153 00000128 E59F054C        LDR              r0, =cont_simbolo
  154 0000012C E5901000        ldr              r1,[r0]     ; r1 = cont_simbolo
                                                            
  155 00000130 E2811C02        add              r1,r1,#512
  156 00000134 E5801000        str              r1,[r0]
  157 00000138         ;generar posicion aleatoria â€˜$â€™
  158 00000138         ;generar numero aletorio
  159 00000138 EBFFFFFE        bl               rand
  160 0000013C E49D0004        POP              {r0}
  161 00000140 E59F2514        LDR              r2, =pantalla
  162 00000144 E20000FF        bic              r0,r0,#0xFFFFFF00
  163 00000148 E0822000        add              r2,r2,r0
  164 0000014C         ;dibujar nuevo â€˜$â€™
  165 0000014C E3A01024        mov              r1,#simbolo
  166 00000150 E5C21000        strb             r1, [r2]
  167 00000154         ;dividir tiempo
  168 00000154 E59F052C        LDR              r0, =max
  169 00000158 E5901000        ldr              r1, [r0]    ; r1 = max
  170 0000015C E1A020A1        mov              r2, r1, LSR #1 ;max = max/2
  171 00000160 E5802000        str              r2,[r0]
  172 00000164 EAFFFFD7 
                       fin_if_simbolo
                               b                bucle
  173 00000168         
  174 00000168         if_mov                               ; calcular instante
                                                             siguiente movimien
                                                            to
  175 00000168 E59F2508        LDR              r2, =cont
  176 0000016C E5923000        ldr              r3,[r2]     ; r1 = cont
  177 00000170 E2833008        add              r3,r3,#8    ; r1 = cont + 8
  178 00000174 E5823000        str              r3,[r2]
  179 00000178         ;si toca mover â€˜#â€™
  180 00000178 E59F050C        LDR              r0,=dirx
  181 0000017C E5900000        ldr              r0,[r0]     ; r1 = dirx
  182 00000180 E59F1508        LDR              r1, =diry
  183 00000184 E5911000        ldr              r1,[r1]     ; r3 = diry
  184 00000188 E3500000        cmp              r0,#0       ; if(dirx != 0 || d
                                                            iry != 0)
  185 0000018C 03510000        cmpeq            r1,#0
  186 00000190 0A000007        beq              fin_if_mov



ARM Macro Assembler    Page 7 


  187 00000194         ;borrar â€˜#â€™ anterior
  188 00000194         ;calcular nueva posicion â€˜#â€™
  189 00000194         ;dibujar nuevo â€˜#â€™
  190 00000194 E3500001        cmp              r0,#1       ; if(dir x = 1)
  191 00000198 0A000013        beq              mover_derecha
  192 0000019C E3700001        cmp              r0,#-1      ; if(dir x = -1)
  193 000001A0 0A00003B        beq              mover_izquierda
  194 000001A4 E3510001        cmp              r1,#1       ; if(dir y = 1)
  195 000001A8 0A000063        beq              mover_abajo
  196 000001AC E3710001        cmp              r1,#-1      ; if(dir y = -1)
  197 000001B0 0A00008B        beq              mover_arriba
  198 000001B4 EAFFFFC3 
                       fin_if_mov
                               b                bucle
  199 000001B8         
  200 000001B8         
  201 000001B8         ;Inhabilitar interrupciones en el VIC
  202 000001B8         ;RSI_timer
  203 000001B8 E59F04D4 
                       fin_juego
                               LDR              r0, = VICIntEnClr 
                                                            ;r0 = @VICIntEnClr
  204 000001BC E3A01010        mov              r1,#2_10000 ;r1 = #2_10000
  205 000001C0 E5801000        str              r1,[r0]     ;VICIntEnClr[4] = 1
                                                             -> VICIntEnable[4]
                                                             = 0
  206 000001C4         ;RSI_teclado
  207 000001C4 E59F04C8        LDR              r0, = VICIntEnClr 
                                                            ;r0 = @VICIntEnClr
  208 000001C8 E3A01080        mov              r1,#2_10000000 
                                                            ;r1 = #2_10000000
  209 000001CC E5801000        str              r1,[r0]     ;VICIntEnClr[7] = 1
                                                             -> VICIntEnable[7]
                                                             = 0
  210 000001D0         ;Desprogramar VIC
  211 000001D0 E59F0474        LDR              r0, =VICVectAddr0
  212 000001D4 E3A01004        mov              r1, #IRQ_Index_timer
  213 000001D8 E3A02007        mov              r2, #IRQ_Index_tec
  214 000001DC E0233003        eor              r3,r3,r3    ;r3 = 0
  215 000001E0 E7803101        str              r3, [r0,r1,LSL#2]
  216 000001E4 E7803102        str              r3, [r0,r2,LSL#2]
  217 000001E8         
  218 000001E8 EAFFFFFE 
                       bfin    b                bfin
  219 000001EC         ;FIN_MAIN
  220 000001EC         
  221 000001EC         
  222 000001EC         ; MOVIMIENTOS
  223 000001EC E59F746C 
                       mover_derecha
                               LDR              r7, =dir_posicion
  224 000001F0 E5970000        ldr              r0,[r7]     ;
  225 000001F4 E3A01020        mov              r1, #espacio
  226 000001F8 E5C01000        strb             r1,[r0]     ; posicion = #espac
                                                            io
  227 000001FC         ;comprobar si ha llegado al extremo
  228 000001FC E59F1464 
                       if_dcha LDR              r1, =columna
  229 00000200 E5912000        ldr              r2,[r1]     ; r2 = columna



ARM Macro Assembler    Page 8 


  230 00000204 E352001F        cmp              r2, #31     ; if(columna == 31)
                                                            
  231 00000208 1A00000D        bne              else_dcha
  232 0000020C E242201F        sub              r2,r2,#31
  233 00000210 E5812000        str              r2,[r1]     ; columna = columna
                                                             -31
  234 00000214 E240001F        sub              r0,r0,#31   ; posicion = posici
                                                            on - 31
  235 00000218         ;comprobar si hay un simbolo en esa posicion
  236 00000218 E5D02000        ldrb             r2, [r0]    ; posicion2 = espac
                                                            io || simbolo
  237 0000021C E3520024        cmp              r2, #simbolo ; if(posicion2 == 
                                                            simbolo)
  238 00000220 1A000017        bne              guardar_dcha
  239 00000224         ;if(posicion2 == simbolo) => dividir tiempo
  240 00000224 E59F345C        LDR              r3, =max
  241 00000228 E5934000        ldr              r4, [r3]    ; r4 = max
  242 0000022C E1A040A4        mov              r4, r4, LSR #1 ; max = max/2
  243 00000230 E59F5448        LDR              r5, =reloj_fin
  244 00000234 E5956000        ldr              r6 ,[r5]
  245 00000238 E0266006        eor              r6,r6,r6    ; r6 = 0
  246 0000023C E5856000        str              r6,[r5]     ; reloj_fin = 0
  247 00000240 EA00000F        b                guardar_dcha
  248 00000244         else_dcha                            ;else
  249 00000244 E2800001        add              r0,r0,#1    ; @posicion = @posi
                                                            cion +  1
  250 00000248 E59F1418        LDR              r1, =columna
  251 0000024C E5912000        ldr              r2,[r1]     ; r2 = columna
  252 00000250 E2822001        add              r2,r2,#1    ; columna ++
  253 00000254 E5812000        str              r2,[r1]
  254 00000258 E5D02000        ldrb             r2, [r0]    ; posicion2 = espac
                                                            io || simbolo
  255 0000025C E3520024        cmp              r2, #simbolo ; if(posicion2 == 
                                                            simbolo)
  256 00000260 1A000007        bne              guardar_dcha
  257 00000264         ;if(posicion2 == simbolo) == true => dividir tiempo
  258 00000264 E59F341C        LDR              r3, =max
  259 00000268 E5934000        ldr              r4, [r3]    ; r4 = max
  260 0000026C E1A040A4        mov              r4, r4, LSR #1 ; max = max/2
  261 00000270 E5834000        str              r4,[r3]     ;
  262 00000274 E59F5404        LDR              r5, =reloj_fin
  263 00000278 E5956000        ldr              r6 ,[r5]
  264 0000027C E0266006        eor              r6,r6,r6    ; r6 = 0
  265 00000280 E5856000        str              r6,[r5]     ; reloj_fin = 0
  266 00000284 E3A06023 
                       guardar_dcha
                               mov              r6, #jugador
  267 00000288 E5C06000        strb             r6,[r0]
  268 0000028C E5870000        str              r0, [r7]
  269 00000290 EAFFFFC7        b                fin_if_mov
  270 00000294         
  271 00000294         
  272 00000294         
  273 00000294 E59F73C4 
                       mover_izquierda
                               LDR              r7, =dir_posicion
  274 00000298 E5970000        ldr              r0, [r7]
  275 0000029C E3A01020        mov              r1, #espacio
  276 000002A0 E5C01000        strb             r1,[r0]



ARM Macro Assembler    Page 9 


  277 000002A4         ;comprobar si ha llegado al extremo
  278 000002A4 E59F13BC 
                       if_izda LDR              r1, =columna
  279 000002A8 E5D12000        ldrb             r2,[r1]
  280 000002AC E3520000        cmp              r2, #0      ; if(columna == 0)
  281 000002B0 1A00000D        bne              else_izda
  282 000002B4 E282201F        add              r2,r2,#31   ; columna = columna
                                                             + 31
  283 000002B8 E5812000        str              r2,[r1]
  284 000002BC E280001F        add              r0,r0,#31   ; posicion = posici
                                                            on + 31
  285 000002C0 E5D02000        ldrb             r2, [r0]    ; posicion2 = espac
                                                            io || simbolo
  286 000002C4 E3520024        cmp              r2, #simbolo ; if(posicion2 == 
                                                            simbolo)
  287 000002C8 1A000017        bne              guardar_izda
  288 000002CC         ;if(posicion2 == simbolo) == true => dividir tiempo
  289 000002CC E59F33B4        LDR              r3, =max
  290 000002D0 E5934000        ldr              r4, [r3]
  291 000002D4 E1A040A4        mov              r4, r4, LSR #1 ; max = max/2
  292 000002D8 E59F53A0        LDR              r5, =reloj_fin
  293 000002DC E5956000        ldr              r6 ,[r5]
  294 000002E0 E0266006        eor              r6,r6,r6
  295 000002E4 E5856000        str              r6,[r5]
  296 000002E8 EA00000F        b                guardar_izda
  297 000002EC         else_izda                            ;else
  298 000002EC E2400001        sub              r0,r0,#1    ; @posicion = @posi
                                                            cion -  1
  299 000002F0 E59F1370        LDR              r1, =columna
  300 000002F4 E5912000        ldr              r2,[r1]     ; r2 = columna
  301 000002F8 E2422001        sub              r2,r2,#1    ; columna --
  302 000002FC E5812000        str              r2,[r1]
  303 00000300 E5D02000        ldrb             r2, [r0]    ; posicion = espaci
                                                            o || simbolo
  304 00000304 E3520024        cmp              r2, #simbolo ; if(posicion2 == 
                                                            simbolo)
  305 00000308 1A000007        bne              guardar_izda
  306 0000030C         ;if(posicion2 == simbolo) == true => dividir tiempo
  307 0000030C E59F3374        LDR              r3, =max
  308 00000310 E5934000        ldr              r4, [r3]
  309 00000314 E1A040A4        mov              r4, r4, LSR #1 ; max = max/2
  310 00000318 E5834000        str              r4,[r3]     ;
  311 0000031C E59F535C        LDR              r5, =reloj_fin
  312 00000320 E5956000        ldr              r6 ,[r5]
  313 00000324 E0266006        eor              r6,r6,r6
  314 00000328 E5856000        str              r6,[r5]
  315 0000032C E3A06023 
                       guardar_izda
                               mov              r6, #jugador
  316 00000330 E5C06000        strb             r6,[r0]
  317 00000334 E5C70000        strb             r0,[r7]
  318 00000338 EAFFFF9D        b                fin_if_mov
  319 0000033C         
  320 0000033C E59F731C 
                       mover_abajo
                               LDR              r7, =dir_posicion
  321 00000340 E5970000        ldr              r0,[r7]
  322 00000344 E3A01020        mov              r1, #espacio
  323 00000348 E5C01000        strb             r1,[r0]



ARM Macro Assembler    Page 10 


  324 0000034C         ;comprobar si ha llegado al extremo
  325 0000034C E59F1310 
                       if_abajo
                               LDR              r1, =fila
  326 00000350 E5912000        ldr              r2,[r1]
  327 00000354 E352000F        cmp              r2, #15     ; if(fila == 15)
  328 00000358 1A00000D        bne              else_abajo
  329 0000035C E242200F        sub              r2,r2,#15   ; fila = fila - 15
  330 00000360 E5812000        str              r2,[r1]
  331 00000364 E2400E1E        sub              r0,r0,#480  ; posicion = posici
                                                            on - 480
  332 00000368 E5D02000        ldrb             r2, [r0]    ; posicion2 = espac
                                                            io || simbolo
  333 0000036C E3520024        cmp              r2, #simbolo ; if(posicion2 == 
                                                            simbolo)
  334 00000370 1A000017        bne              guardar_abajo
  335 00000374         ;if(posicion2 == simbolo) == true => dividir tiempo
  336 00000374 E59F330C        LDR              r3, =max
  337 00000378 E5934000        ldr              r4, [r3]
  338 0000037C E1A040A4        mov              r4, r4, LSR #1 ; max = max/2
  339 00000380 E59F52F8        LDR              r5, =reloj_fin
  340 00000384 E5956000        ldr              r6 ,[r5]
  341 00000388 E0266006        eor              r6,r6,r6
  342 0000038C E5856000        str              r6,[r5]
  343 00000390 EA00000F        b                guardar_abajo
  344 00000394         else_abajo                           ;else
  345 00000394 E2800020        add              r0,r0,#32   ; @posicion = @posi
                                                            cion +  1
  346 00000398 E59F12C4        LDR              r1, =fila
  347 0000039C E5912000        ldr              r2,[r1]
  348 000003A0 E2822001        add              r2,r2,#1
  349 000003A4 E5812000        str              r2,[r1]
  350 000003A8 E5D02000        ldrb             r2, [r0]    ; posicion = espaci
                                                            o || simbolo
  351 000003AC E3520024        cmp              r2, #simbolo ; if(posicion2 == 
                                                            simbolo)
  352 000003B0 1A000007        bne              guardar_abajo
  353 000003B4         ;if(posicion2 == simbolo) == true => dividir tiempo
  354 000003B4 E59F32CC        LDR              r3, =max
  355 000003B8 E5934000        ldr              r4, [r3]
  356 000003BC E1A040A4        mov              r4, r4, LSR #1 ; max = max/2
  357 000003C0 E5834000        str              r4,[r3]     ;
  358 000003C4 E59F52B4        LDR              r5, =reloj_fin
  359 000003C8 E5956000        ldr              r6 ,[r5]
  360 000003CC E0266006        eor              r6,r6,r6
  361 000003D0 E5856000        str              r6,[r5]
  362 000003D4 E3A06023 
                       guardar_abajo
                               mov              r6, #jugador
  363 000003D8 E5C06000        strb             r6,[r0]
  364 000003DC E5870000        str              r0,[r7]
  365 000003E0 EAFFFF73        b                fin_if_mov
  366 000003E4         
  367 000003E4         
  368 000003E4         
  369 000003E4 E59F7274 
                       mover_arriba
                               LDR              r7, =dir_posicion
  370 000003E8 E5970000        ldr              r0,[r7]



ARM Macro Assembler    Page 11 


  371 000003EC E3A01020        mov              r1, #espacio
  372 000003F0 E5C01000        strb             r1,[r0]
  373 000003F4         ;comprobar si ha llegado al extremo
  374 000003F4 E59F1268 
                       if_arriba
                               LDR              r1, =fila
  375 000003F8 E5912000        ldr              r2,[r1]
  376 000003FC E3520000        cmp              r2, #0      ; if(fila == 0)
  377 00000400 1A00000D        bne              else_arriba
  378 00000404 E282200F        add              r2,r2,#15   ; fila = fila + 15
  379 00000408 E5812000        str              r2,[r1]
  380 0000040C E2800E1E        add              r0,r0,#480  ; posicion = posici
                                                            on + 480
  381 00000410 E5D02000        ldrb             r2, [r0]    ; posicion2 = espac
                                                            io || simbolo
  382 00000414 E3520024        cmp              r2, #simbolo ; if(posicion2 == 
                                                            simbolo)
  383 00000418 1A000017        bne              guardar_arriba
  384 0000041C         ;if(posicion2 == simbolo) == true => dividir tiempo
  385 0000041C E59F3264        LDR              r3, =max
  386 00000420 E5934000        ldr              r4, [r3]
  387 00000424 E1A040A4        mov              r4, r4, LSR #1 ; max = max/2
  388 00000428 E59F5250        LDR              r5, =reloj_fin
  389 0000042C E5956000        ldr              r6 ,[r5]
  390 00000430 E0266006        eor              r6,r6,r6
  391 00000434 E5856000        str              r6,[r5]
  392 00000438 EA00000F        b                guardar_arriba
  393 0000043C         else_arriba                          ;else
  394 0000043C E2400020        sub              r0,r0,#32   ; @posicion = @posi
                                                            cion +  1
  395 00000440 E59F121C        LDR              r1, =fila
  396 00000444 E5912000        ldr              r2,[r1]
  397 00000448 E2422001        sub              r2,r2,#1
  398 0000044C E5812000        str              r2,[r1]
  399 00000450 E5D02000        ldrb             r2, [r0]    ; posicion = espaci
                                                            o || simbolo
  400 00000454 E3520024        cmp              r2, #simbolo ; if(posicion2 == 
                                                            simbolo)
  401 00000458 1A000007        bne              guardar_arriba
  402 0000045C         ;if(posicion2 == simbolo) == true => dividir tiempo
  403 0000045C E59F3224        LDR              r3, =max
  404 00000460 E5934000        ldr              r4, [r3]
  405 00000464 E1A040A4        mov              r4, r4, LSR #1 ; max = max/2
  406 00000468 E5834000        str              r4,[r3]     ;
  407 0000046C E59F520C        LDR              r5, =reloj_fin
  408 00000470 E5956000        ldr              r6 ,[r5]
  409 00000474 E0266006        eor              r6,r6,r6
  410 00000478 E5856000        str              r6,[r5]
  411 0000047C E3A06023 
                       guardar_arriba
                               mov              r6, #jugador
  412 00000480 E5C06000        strb             r6,[r0]
  413 00000484 E5870000        str              r0,[r7]
  414 00000488 EAFFFF49        b                fin_if_mov
  415 0000048C         
  416 0000048C         ;SUBRUTINAS TRATAMIENTO EXCEPCIONES
  417 0000048C         RSI_timer
  418 0000048C         ;guarda direccion de retorno, palabra de estado,
  419 0000048C E24EE004        sub              lr, lr,#4   ;actualiza el PC de



ARM Macro Assembler    Page 12 


                                                             retorno para que a
                                                            punte a la @siguien
                                                            te
  420 00000490 E52DE004        push             {lr}
  421 00000494 E14FE000        mrs              r14,spsr
  422 00000498 E52DE004        push             {r14}       ;se guarda la spsr 
                                                            en la pila (usando 
                                                            lr)
  423 0000049C         ;salva registros a usar
  424 0000049C E92D0003        push             {r0,r1}
  425 000004A0         ;activa IRQ
  426 000004A0 E10F1000        mrs              r1,cpsr     ;para habilitar IRQ
                                                             de la palabra de e
                                                            stado del modo acti
                                                            vo
  427 000004A4 E3C11080        bic              r1,r1,#I_Bit ;pone a 0 el bit d
                                                            e las IRQ
  428 000004A8 E121F001        msr              cpsr_c,r1   ;_c indica se copia
                                                            n el byte menos sig
                                                            nificativo
  429 000004AC         ;deactiva del VIC la peticion
  430 000004AC E59F01E4        LDR              r0,=T0_IR
  431 000004B0 E3A01001        mov              r1,#1
  432 000004B4 E5801000        str              r1,[r0]
  433 000004B8         
  434 000004B8         ;tratamiento interrupcion
  435 000004B8 E59F01B4        LDR              r0,=reloj   ;carga la variable 
                                                            reloj
  436 000004BC E5901000        ldr              r1,[r0]
  437 000004C0 E2811001        add              r1,r1,#1    ;aumenta la cuenta
  438 000004C4 E5801000        str              r1,[r0]     ;almacena el valor 
                                                            en reloj
  439 000004C8 E59F21B0        LDR              r2, =reloj_fin ;carga la variab
                                                            le reloj_fin
  440 000004CC E5923000        ldr              r3,[r2]
  441 000004D0 E2833001        add              r3,r3,#1    ;aumenta la cuenta
  442 000004D4 E5823000        str              r3, [r2]    ;almacena el valor 
                                                            en reloj_fin
  443 000004D8         
  444 000004D8         ;desactiva IRQ
  445 000004D8 E10F1000        mrs              r1,cpsr
  446 000004DC E3811080        orr              r1,r1,#I_Bit
  447 000004E0 E12FF001        msr              cpsr_cxsf,r1
  448 000004E4         ;restaura registros
  449 000004E4 E8BD0003        pop              {r0,r1}
  450 000004E8         ;desapila spsr y retorna al programa principal
  451 000004E8 E49DE004        pop              {r14}
  452 000004EC E16FF00E        msr              spsr_cxsf,r14 ;restaura el spsr
                                                             dela pila
  453 000004F0 E59FE1A4        LDR              r14,=VICVectAddr
  454 000004F4 E58EE000        str              r14,[r14]
  455 000004F8 E8FD8000        pop              {pc}^
  456 000004FC         fin_timer
  457 000004FC         
  458 000004FC         RSI_teclado                          ;guarda direccion d
                                                            e retorno, palabra 
                                                            de estado,
  459 000004FC E24EE004        sub              lr,lr,#4
  460 00000500 E52DE004        PUSH             {lr}



ARM Macro Assembler    Page 13 


  461 00000504 E14FE000        mrs              r14,spsr
  462 00000508 E52DE004        PUSH             {r14}
  463 0000050C         ;activa IRQ
  464 0000050C E321F052        msr              cpsr_c , #2_01010010 ; activar 
                                                            interrupcion IRQ
  465 00000510         ;salva registros a usar
  466 00000510 E92D001F        PUSH             {r0-r4}
  467 00000514         ;lee el codigo ASCII introducido
  468 00000514 E59F1184        LDR              r1,=TEC_DAT ;r1 = @r1_datos tec
                                                            lado
  469 00000518 E5D10000        ldrb             r0,[r1]     ;r0 = cod ASCII tec
                                                            la
  470 0000051C         
  471 0000051C         ;tratamiento interrupcion
  472 0000051C E3500049        cmp              r0,#arriba  ;if(r0 == I )
  473 00000520 0A000015        beq              mov_arriba
  474 00000524 E3500069        cmp              r0,#arriba_min ;if(r0 == i )
  475 00000528 0A000013        beq              mov_arriba
  476 0000052C         
  477 0000052C E350004A        cmp              r0,#izquierda ;if(r0 == J )
  478 00000530 0A000015        beq              mov_izq
  479 00000534 E350006A        cmp              r0,#izquierda_min ;if(r0 == j )
                                                            
  480 00000538 0A000013        beq              mov_izq
  481 0000053C         
  482 0000053C E350004B        cmp              r0,#abajo   ;if(r0 == K )
  483 00000540 0A000015        beq              mov_abajo
  484 00000544 E350006B        cmp              r0,#abajo_min ;if(r0 == k )
  485 00000548 0A000013        beq              mov_abajo
  486 0000054C         
  487 0000054C E350004C        cmp              r0,#derecha ;           ;if(r0 
                                                            == L )
  488 00000550 0A000015        beq              mov_dcha
  489 00000554 E350006C        cmp              r0,#derecha_min ;if(r0 == l )
  490 00000558 0A000013        beq              mov_dcha
  491 0000055C         
  492 0000055C E350002B        cmp              r0, #aumentar ;if(r0 == + )
  493 00000560 0A00001D        beq              aumentar_velocidad
  494 00000564         
  495 00000564 E350002D        cmp              r0, #disminuir ;if(r0 == - )
  496 00000568 0A000024        beq              disminuir_velocidad
  497 0000056C         
  498 0000056C E3500051        cmp              r0,#acabar  ;if(r0 == Q )
  499 00000570 0A00002B        beq              acabar_partida
  500 00000574 E3500071        cmp              r0,#acabar_min ;if(r0 == q )
  501 00000578 0A000029        beq              acabar_partida
  502 0000057C         
  503 0000057C         
  504 0000057C E59F010C 
                       mov_arriba
                               LDR              r0, =diry
  505 00000580 E3E01000        mov              r1,#-1
  506 00000584 E5801000        str              r1, [r0]    ; diry = -1
  507 00000588 EA00000B        b                anular_dirx
  508 0000058C         
  509 0000058C E59F00F8 
                       mov_izq LDR              r0, =dirx
  510 00000590 E3E01000        mov              r1,#-1
  511 00000594 E5801000        str              r1, [r0]    ; dirx = -1



ARM Macro Assembler    Page 14 


  512 00000598 EA00000B        b                anular_diry
  513 0000059C         
  514 0000059C E59F00EC 
                       mov_abajo
                               LDR              r0, =diry
  515 000005A0 E3A01001        mov              r1, #1
  516 000005A4 E5801000        str              r1, [r0]    ; diry = 1
  517 000005A8 EA000003        b                anular_dirx
  518 000005AC         
  519 000005AC E59F00D8 
                       mov_dcha
                               LDR              r0, =dirx
  520 000005B0 E3A01001        mov              r1,#1
  521 000005B4 E5801000        str              r1, [r0]    ; dirx = 1
  522 000005B8 EA000003        b                anular_diry
  523 000005BC         
  524 000005BC E59F00C8 
                       anular_dirx
                               LDR              r0, =dirx
  525 000005C0 E3A01000        mov              r1,#0
  526 000005C4 E5801000        str              r1, [r0]    ; dirx = 0
  527 000005C8 EA000018        b                fin_tec
  528 000005CC         
  529 000005CC E59F00BC 
                       anular_diry
                               LDR              r0, =diry
  530 000005D0 E3A01000        mov              r1,#0
  531 000005D4 E5801000        str              r1, [r0]    ; diry = 0
  532 000005D8 EA000014        b                fin_tec
  533 000005DC         
  534 000005DC E59F00A4 
                       aumentar_velocidad
                               LDR              r0, =max
  535 000005E0 E5901000        ldr              r1, [r0]    ; r1= max
  536 000005E4 E1A02081        mov              r2,r1,LSL#1 ; r2 = max*2
  537 000005E8 E59F30B4        LDR              r3, =velocidad_maxima
  538 000005EC E5934000        ldr              r4,[r3]     ; r4 = velocidad_ma
                                                            xima
  539 000005F0 E1520004        cmp              r2,r4       ; if ( max * 2 > ve
                                                            locidad_maxima)
  540 000005F4 C5804000        strgt            r4,[r0]     ;max = velocidad_ma
                                                            xima
  541 000005F8 E5802000        str              r2,[r0]     ;max = max*2
  542 000005FC EA00000B        b                fin_tec
  543 00000600         
  544 00000600 E59F0080 
                       disminuir_velocidad
                               LDR              r0, =max
  545 00000604 E5901000        ldr              r1, [r0]    ; r1= max
  546 00000608 E1A020A1        mov              r2,r1,LSR#1 ; r2 = max/2
  547 0000060C E59F3094        LDR              r3, =velocidad_minima
  548 00000610 E5934000        ldr              r4,[r3]     ; r4 = velocidad_mi
                                                            nima
  549 00000614 E1520004        cmp              r2,r4       ; if( max / 2 < vel
                                                            ocidad_minima)
  550 00000618 B5804000        strlt            r4,[r0]
  551 0000061C E5802000        str              r2,[r0]
  552 00000620 EA000002        b                fin_tec
  553 00000624         



ARM Macro Assembler    Page 15 


  554 00000624         
  555 00000624 E59F0044 
                       acabar_partida
                               LDR              r0, =fin
  556 00000628 E3A01001        mov              r1, #1
  557 0000062C E5C01000        strb             r1,[r0]     ; fin = 1
  558 00000630         
  559 00000630         ;restaura registros
  560 00000630 E8BD001F 
                       fin_tec POP              {r0-r4}
  561 00000634         ;desactiva IRQ
  562 00000634 E321F0D2        msr              cpsr_c,#2_11010010 ;I = 1 desac
                                                            tivar interrupcion 
                                                            IRQ
  563 00000638         ;desapila spsr y retorna al programa principal
  564 00000638 E49DE004        POP              {r14}       ;r14 = cpsr prog. i
                                                            nterrumpido
  565 0000063C E16FF00E        msr              spsr_fsxc,r14 ;spsr = cpsr prog
                                                            . interrumpido
  566 00000640 E59FE054        LDR              r14,=VICVectAddr ;EOI r14 = @VI
                                                            CVectAddr
  567 00000644 E58EE000        str              r14,[r14]   ;EOI escritura en V
                                                            ICVectAddr
  568 00000648 E8FD8000        POP              {pc}^       ;ret. a prog inter.
                                                             + rec. estado
  569 0000064C         fin_RSI_teclado
  570 0000064C                 END
              FFFFF100 
              00000000 
              FFFFF010 
              00000000 
              40007E00 
              00000000 
              00000000 
              00000000 
              000001FF 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00007530 
              00000000 
              00000000 
              00000000 
              FFFFF014 
              E0004000 
              FFFFF030 
              E0010000 
              00000000 
              00000000 
Command Line: --debug --xref --apcs=interwork --depend=prac5.d -oprac5.o -IC:\K
eil\ARM\INC -IC:\Keil\ARM\INC\Philips --predefine="__EVAL SETA 1" --list=prac5.
lst prac5.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

columna 00000024

Symbol: columna
   Definitions
      At line 27 in file prac5.s
   Uses
      At line 110 in file prac5.s
      At line 228 in file prac5.s
      At line 250 in file prac5.s
      At line 278 in file prac5.s
      At line 299 in file prac5.s

cont 0000000C

Symbol: cont
   Definitions
      At line 6 in file prac5.s
   Uses
      At line 129 in file prac5.s
      At line 175 in file prac5.s

cont_simbolo 00000010

Symbol: cont_simbolo
   Definitions
      At line 7 in file prac5.s
   Uses
      At line 134 in file prac5.s
      At line 153 in file prac5.s

datos 00000000

Symbol: datos
   Definitions
      At line 1 in file prac5.s
   Uses
      None
Comment: datos unused
dir_posicion 00000028

Symbol: dir_posicion
   Definitions
      At line 29 in file prac5.s
   Uses
      At line 105 in file prac5.s
      At line 223 in file prac5.s
      At line 273 in file prac5.s
      At line 320 in file prac5.s
      At line 369 in file prac5.s

dirx 00000014

Symbol: dirx
   Definitions
      At line 8 in file prac5.s
   Uses
      At line 180 in file prac5.s
      At line 509 in file prac5.s
      At line 519 in file prac5.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

      At line 524 in file prac5.s

diry 00000018

Symbol: diry
   Definitions
      At line 9 in file prac5.s
   Uses
      At line 182 in file prac5.s
      At line 504 in file prac5.s
      At line 514 in file prac5.s
      At line 529 in file prac5.s

fila 00000020

Symbol: fila
   Definitions
      At line 26 in file prac5.s
   Uses
      At line 107 in file prac5.s
      At line 325 in file prac5.s
      At line 346 in file prac5.s
      At line 374 in file prac5.s
      At line 395 in file prac5.s

fin 0000001C

Symbol: fin
   Definitions
      At line 10 in file prac5.s
   Uses
      At line 120 in file prac5.s
      At line 555 in file prac5.s

max 00000008

Symbol: max
   Definitions
      At line 5 in file prac5.s
   Uses
      At line 168 in file prac5.s
      At line 240 in file prac5.s
      At line 258 in file prac5.s
      At line 289 in file prac5.s
      At line 307 in file prac5.s
      At line 336 in file prac5.s
      At line 354 in file prac5.s
      At line 385 in file prac5.s
      At line 403 in file prac5.s
      At line 534 in file prac5.s
      At line 544 in file prac5.s

reloj 00000000

Symbol: reloj
   Definitions
      At line 3 in file prac5.s
   Uses
      At line 126 in file prac5.s



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

      At line 435 in file prac5.s

reloj_fin 00000004

Symbol: reloj_fin
   Definitions
      At line 4 in file prac5.s
   Uses
      At line 140 in file prac5.s
      At line 243 in file prac5.s
      At line 262 in file prac5.s
      At line 292 in file prac5.s
      At line 311 in file prac5.s
      At line 339 in file prac5.s
      At line 358 in file prac5.s
      At line 388 in file prac5.s
      At line 407 in file prac5.s
      At line 439 in file prac5.s

velocidad_maxima 0000002C

Symbol: velocidad_maxima
   Definitions
      At line 49 in file prac5.s
   Uses
      At line 537 in file prac5.s
Comment: velocidad_maxima used once
velocidad_minima 00000030

Symbol: velocidad_minima
   Definitions
      At line 50 in file prac5.s
   Uses
      At line 547 in file prac5.s
Comment: velocidad_minima used once
14 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

RSI_teclado 000004FC

Symbol: RSI_teclado
   Definitions
      At line 458 in file prac5.s
   Uses
      At line 72 in file prac5.s
Comment: RSI_teclado used once
RSI_timer 0000048C

Symbol: RSI_timer
   Definitions
      At line 417 in file prac5.s
   Uses
      At line 63 in file prac5.s
Comment: RSI_timer used once
acabar_partida 00000624

Symbol: acabar_partida
   Definitions
      At line 555 in file prac5.s
   Uses
      At line 499 in file prac5.s
      At line 501 in file prac5.s

anular_dirx 000005BC

Symbol: anular_dirx
   Definitions
      At line 524 in file prac5.s
   Uses
      At line 507 in file prac5.s
      At line 517 in file prac5.s

anular_diry 000005CC

Symbol: anular_diry
   Definitions
      At line 529 in file prac5.s
   Uses
      At line 512 in file prac5.s
      At line 522 in file prac5.s

aumentar_velocidad 000005DC

Symbol: aumentar_velocidad
   Definitions
      At line 534 in file prac5.s
   Uses
      At line 493 in file prac5.s
Comment: aumentar_velocidad used once
bfin 000001E8

Symbol: bfin
   Definitions
      At line 218 in file prac5.s
   Uses
      At line 218 in file prac5.s
Comment: bfin used once



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

buc_col 00000054

Symbol: buc_col
   Definitions
      At line 86 in file prac5.s
   Uses
      At line 97 in file prac5.s
Comment: buc_col used once
buc_fil 00000060

Symbol: buc_fil
   Definitions
      At line 89 in file prac5.s
   Uses
      At line 95 in file prac5.s
Comment: buc_fil used once
bucle 000000C8

Symbol: bucle
   Definitions
      At line 120 in file prac5.s
   Uses
      At line 149 in file prac5.s
      At line 172 in file prac5.s
      At line 198 in file prac5.s

codigo 00000000

Symbol: codigo
   Definitions
      At line 52 in file prac5.s
   Uses
      None
Comment: codigo unused
disminuir_velocidad 00000600

Symbol: disminuir_velocidad
   Definitions
      At line 544 in file prac5.s
   Uses
      At line 496 in file prac5.s
Comment: disminuir_velocidad used once
else_abajo 00000394

Symbol: else_abajo
   Definitions
      At line 344 in file prac5.s
   Uses
      At line 328 in file prac5.s
Comment: else_abajo used once
else_arriba 0000043C

Symbol: else_arriba
   Definitions
      At line 393 in file prac5.s
   Uses
      At line 377 in file prac5.s
Comment: else_arriba used once
else_dcha 00000244



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols


Symbol: else_dcha
   Definitions
      At line 248 in file prac5.s
   Uses
      At line 231 in file prac5.s
Comment: else_dcha used once
else_izda 000002EC

Symbol: else_izda
   Definitions
      At line 297 in file prac5.s
   Uses
      At line 281 in file prac5.s
Comment: else_izda used once
fin_RSI_teclado 0000064C

Symbol: fin_RSI_teclado
   Definitions
      At line 569 in file prac5.s
   Uses
      None
Comment: fin_RSI_teclado unused
fin_col 00000084

Symbol: fin_col
   Definitions
      At line 98 in file prac5.s
   Uses
      At line 87 in file prac5.s
Comment: fin_col used once
fin_fil 0000007C

Symbol: fin_fil
   Definitions
      At line 96 in file prac5.s
   Uses
      At line 90 in file prac5.s
Comment: fin_fil used once
fin_if_mov 000001B4

Symbol: fin_if_mov
   Definitions
      At line 198 in file prac5.s
   Uses
      At line 186 in file prac5.s
      At line 269 in file prac5.s
      At line 318 in file prac5.s
      At line 365 in file prac5.s
      At line 414 in file prac5.s

fin_if_simbolo 00000164

Symbol: fin_if_simbolo
   Definitions
      At line 172 in file prac5.s
   Uses
      None
Comment: fin_if_simbolo unused



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Relocatable symbols

fin_ini_pantalla 00000094

Symbol: fin_ini_pantalla
   Definitions
      At line 102 in file prac5.s
   Uses
      None
Comment: fin_ini_pantalla unused
fin_juego 000001B8

Symbol: fin_juego
   Definitions
      At line 203 in file prac5.s
   Uses
      At line 123 in file prac5.s
Comment: fin_juego used once
fin_tec 00000630

Symbol: fin_tec
   Definitions
      At line 560 in file prac5.s
   Uses
      At line 527 in file prac5.s
      At line 532 in file prac5.s
      At line 542 in file prac5.s
      At line 552 in file prac5.s

fin_timer 000004FC

Symbol: fin_timer
   Definitions
      At line 456 in file prac5.s
   Uses
      None
Comment: fin_timer unused
guardar_abajo 000003D4

Symbol: guardar_abajo
   Definitions
      At line 362 in file prac5.s
   Uses
      At line 334 in file prac5.s
      At line 343 in file prac5.s
      At line 352 in file prac5.s

guardar_arriba 0000047C

Symbol: guardar_arriba
   Definitions
      At line 411 in file prac5.s
   Uses
      At line 383 in file prac5.s
      At line 392 in file prac5.s
      At line 401 in file prac5.s

guardar_dcha 00000284

Symbol: guardar_dcha
   Definitions



ARM Macro Assembler    Page 5 Alphabetic symbol ordering
Relocatable symbols

      At line 266 in file prac5.s
   Uses
      At line 238 in file prac5.s
      At line 247 in file prac5.s
      At line 256 in file prac5.s

guardar_izda 0000032C

Symbol: guardar_izda
   Definitions
      At line 315 in file prac5.s
   Uses
      At line 287 in file prac5.s
      At line 296 in file prac5.s
      At line 305 in file prac5.s

if_abajo 0000034C

Symbol: if_abajo
   Definitions
      At line 325 in file prac5.s
   Uses
      None
Comment: if_abajo unused
if_arriba 000003F4

Symbol: if_arriba
   Definitions
      At line 374 in file prac5.s
   Uses
      None
Comment: if_arriba unused
if_dcha 000001FC

Symbol: if_dcha
   Definitions
      At line 228 in file prac5.s
   Uses
      None
Comment: if_dcha unused
if_izda 000002A4

Symbol: if_izda
   Definitions
      At line 278 in file prac5.s
   Uses
      None
Comment: if_izda unused
if_mov 00000168

Symbol: if_mov
   Definitions
      At line 174 in file prac5.s
   Uses
      At line 132 in file prac5.s
Comment: if_mov used once
if_simbolo 00000128

Symbol: if_simbolo



ARM Macro Assembler    Page 6 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 151 in file prac5.s
   Uses
      At line 137 in file prac5.s
Comment: if_simbolo used once
ini_pantalla 00000040

Symbol: ini_pantalla
   Definitions
      At line 81 in file prac5.s
   Uses
      None
Comment: ini_pantalla unused
inicio 00000000

Symbol: inicio
   Definitions
      At line 57 in file prac5.s
   Uses
      At line 53 in file prac5.s
Comment: inicio used once
iterar 000000D8

Symbol: iterar
   Definitions
      At line 126 in file prac5.s
   Uses
      At line 138 in file prac5.s
      At line 145 in file prac5.s

mov_abajo 0000059C

Symbol: mov_abajo
   Definitions
      At line 514 in file prac5.s
   Uses
      At line 483 in file prac5.s
      At line 485 in file prac5.s

mov_arriba 0000057C

Symbol: mov_arriba
   Definitions
      At line 504 in file prac5.s
   Uses
      At line 473 in file prac5.s
      At line 475 in file prac5.s

mov_dcha 000005AC

Symbol: mov_dcha
   Definitions
      At line 519 in file prac5.s
   Uses
      At line 488 in file prac5.s
      At line 490 in file prac5.s

mov_izq 0000058C




ARM Macro Assembler    Page 7 Alphabetic symbol ordering
Relocatable symbols

Symbol: mov_izq
   Definitions
      At line 509 in file prac5.s
   Uses
      At line 478 in file prac5.s
      At line 480 in file prac5.s

mover_abajo 0000033C

Symbol: mover_abajo
   Definitions
      At line 320 in file prac5.s
   Uses
      At line 195 in file prac5.s
Comment: mover_abajo used once
mover_arriba 000003E4

Symbol: mover_arriba
   Definitions
      At line 369 in file prac5.s
   Uses
      At line 197 in file prac5.s
Comment: mover_arriba used once
mover_derecha 000001EC

Symbol: mover_derecha
   Definitions
      At line 223 in file prac5.s
   Uses
      At line 191 in file prac5.s
Comment: mover_derecha used once
mover_izquierda 00000294

Symbol: mover_izquierda
   Definitions
      At line 273 in file prac5.s
   Uses
      At line 193 in file prac5.s
Comment: mover_izquierda used once
perder 0000011C

Symbol: perder
   Definitions
      At line 147 in file prac5.s
   Uses
      At line 144 in file prac5.s
Comment: perder used once
47 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

ICBaseEnabl FFFFF000

Symbol: ICBaseEnabl
   Definitions
      At line 12 in file prac5.s
   Uses
      None
Comment: ICBaseEnabl unused
IRQ_Index_tec 00000007

Symbol: IRQ_Index_tec
   Definitions
      At line 19 in file prac5.s
   Uses
      At line 73 in file prac5.s
      At line 213 in file prac5.s

IRQ_Index_timer 00000004

Symbol: IRQ_Index_timer
   Definitions
      At line 18 in file prac5.s
   Uses
      At line 64 in file prac5.s
      At line 68 in file prac5.s
      At line 212 in file prac5.s

I_Bit 00000080

Symbol: I_Bit
   Definitions
      At line 22 in file prac5.s
   Uses
      At line 427 in file prac5.s
      At line 446 in file prac5.s

IntEnableOffset 00000010

Symbol: IntEnableOffset
   Definitions
      At line 17 in file prac5.s
   Uses
      None
Comment: IntEnableOffset unused
T0_IR E0004000

Symbol: T0_IR
   Definitions
      At line 20 in file prac5.s
   Uses
      At line 430 in file prac5.s
Comment: T0_IR used once
TEC_DAT E0010000

Symbol: TEC_DAT
   Definitions
      At line 21 in file prac5.s
   Uses
      At line 468 in file prac5.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

Comment: TEC_DAT used once
VICIntEnClr FFFFF014

Symbol: VICIntEnClr
   Definitions
      At line 14 in file prac5.s
   Uses
      At line 203 in file prac5.s
      At line 207 in file prac5.s

VICIntEnable FFFFF010

Symbol: VICIntEnable
   Definitions
      At line 13 in file prac5.s
   Uses
      At line 66 in file prac5.s
      At line 75 in file prac5.s

VICVectAddr FFFFF030

Symbol: VICVectAddr
   Definitions
      At line 16 in file prac5.s
   Uses
      At line 453 in file prac5.s
      At line 566 in file prac5.s

VICVectAddr0 FFFFF100

Symbol: VICVectAddr0
   Definitions
      At line 15 in file prac5.s
   Uses
      At line 62 in file prac5.s
      At line 71 in file prac5.s
      At line 211 in file prac5.s

abajo 0000004B

Symbol: abajo
   Definitions
      At line 38 in file prac5.s
   Uses
      At line 482 in file prac5.s
Comment: abajo used once
abajo_min 0000006B

Symbol: abajo_min
   Definitions
      At line 39 in file prac5.s
   Uses
      At line 484 in file prac5.s
Comment: abajo_min used once
acabar 00000051

Symbol: acabar
   Definitions
      At line 44 in file prac5.s



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

   Uses
      At line 498 in file prac5.s
Comment: acabar used once
acabar_min 00000071

Symbol: acabar_min
   Definitions
      At line 45 in file prac5.s
   Uses
      At line 500 in file prac5.s
Comment: acabar_min used once
alto 00000010

Symbol: alto
   Definitions
      At line 24 in file prac5.s
   Uses
      At line 89 in file prac5.s
Comment: alto used once
ancho 00000020

Symbol: ancho
   Definitions
      At line 25 in file prac5.s
   Uses
      At line 82 in file prac5.s
      At line 86 in file prac5.s

arriba 00000049

Symbol: arriba
   Definitions
      At line 34 in file prac5.s
   Uses
      At line 472 in file prac5.s
Comment: arriba used once
arriba_min 00000069

Symbol: arriba_min
   Definitions
      At line 35 in file prac5.s
   Uses
      At line 474 in file prac5.s
Comment: arriba_min used once
aumentar 0000002B

Symbol: aumentar
   Definitions
      At line 42 in file prac5.s
   Uses
      At line 492 in file prac5.s
Comment: aumentar used once
derecha 0000004C

Symbol: derecha
   Definitions
      At line 40 in file prac5.s
   Uses
      At line 487 in file prac5.s



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Absolute symbols

Comment: derecha used once
derecha_min 0000006C

Symbol: derecha_min
   Definitions
      At line 41 in file prac5.s
   Uses
      At line 489 in file prac5.s
Comment: derecha_min used once
disminuir 0000002D

Symbol: disminuir
   Definitions
      At line 43 in file prac5.s
   Uses
      At line 495 in file prac5.s
Comment: disminuir used once
espacio 00000020

Symbol: espacio
   Definitions
      At line 31 in file prac5.s
   Uses
      At line 83 in file prac5.s
      At line 225 in file prac5.s
      At line 275 in file prac5.s
      At line 322 in file prac5.s
      At line 371 in file prac5.s

izquierda 0000004A

Symbol: izquierda
   Definitions
      At line 36 in file prac5.s
   Uses
      At line 477 in file prac5.s
Comment: izquierda used once
izquierda_min 0000006A

Symbol: izquierda_min
   Definitions
      At line 37 in file prac5.s
   Uses
      At line 479 in file prac5.s
Comment: izquierda_min used once
jugador 00000023

Symbol: jugador
   Definitions
      At line 32 in file prac5.s
   Uses
      At line 84 in file prac5.s
      At line 266 in file prac5.s
      At line 315 in file prac5.s
      At line 362 in file prac5.s
      At line 411 in file prac5.s

pantalla 40007E00




ARM Macro Assembler    Page 5 Alphabetic symbol ordering
Absolute symbols

Symbol: pantalla
   Definitions
      At line 28 in file prac5.s
   Uses
      At line 81 in file prac5.s
      At line 161 in file prac5.s

semilla 000001FF

Symbol: semilla
   Definitions
      At line 47 in file prac5.s
   Uses
      At line 114 in file prac5.s
Comment: semilla used once
simbolo 00000024

Symbol: simbolo
   Definitions
      At line 33 in file prac5.s
   Uses
      At line 165 in file prac5.s
      At line 237 in file prac5.s
      At line 255 in file prac5.s
      At line 286 in file prac5.s
      At line 304 in file prac5.s
      At line 333 in file prac5.s
      At line 351 in file prac5.s
      At line 382 in file prac5.s
      At line 400 in file prac5.s

30 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

rand 00000000

Symbol: rand
   Definitions
      At line 55 in file prac5.s
   Uses
      At line 159 in file prac5.s
Comment: rand used once
srand 00000000

Symbol: srand
   Definitions
      At line 54 in file prac5.s
   Uses
      At line 116 in file prac5.s
Comment: srand used once
2 symbols
419 symbols in table
